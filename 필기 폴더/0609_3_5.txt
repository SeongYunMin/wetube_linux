{3_5}
ì›¹ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ê¸° ì „ì— middlewareì˜ ê°œë…ì„ ì•Œì•„ì•¼ í•œë‹¤
ë¯¸ë“¤ì›¨ì–´ëŠ” ë§ê·¸ëŒ€ë¡œ ë¯¸ë“¤ì— ìˆëŠ” ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì˜ë¯¸í•œë‹¤ ì–´ë””ì˜ ë¯¸ë“¤ì„ ì˜ë¯¸í• ê¹Œ?
ë°”ë¡œ requestì™€ response ì‚¬ì´ì— ë¯¸ë“¤ì›¨ì–´ê°€ ì¡´ì¬í•œë‹¤
ë¸Œë¼ìš°ì €ê°€ requestí•œ ë‹¤ìŒ, ê·¸ë¦¬ê³  ë‚˜(ì„œë²„)ê°€ ì‘ë‹µí•˜ê¸° ì „ ê·¸ ì‚¬ì´ì— ìˆë‹¤
í•œê°€ì§€ ì•Œì•„ì•¼ ë˜ëŠ”ê²Œ ëª¨ë“  middlewareëŠ” handler ì´ê³  ëª¨ë“  handlerëŠ” middlewareê°€ ë  ìˆ˜ë„ ìˆë‹¤
ìš°ë¦¬ëŠ” handlerë¥¼ ì•ìœ¼ë¡œ controllerë¼ê³  í•  ê²ƒì´ë‹¤ handleHome ê°™ì€ê²Œ ë‹¤ controllerì´ë‹¤
ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” req, res ë¿ë§Œ ì•„ë‹ˆë¼ ë˜í•˜ë‚˜ì˜ ì¸ìë¥¼ ê°€ì§„ë‹¤ ë°”ë¡œ nextì´ë‹¤
nextëŠ” ë‹¤ìŒ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì—­í• ì„ í•œë‹¤ ì´ì „ì— ë°°ìš´ res.end()ë¥¼ returní•˜ëŠ” ëŒ€ì‹  next() 
ë¥¼ ì“°ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ ë³´ì localhost ì—´ì–´ë³´ë‹ˆ ì´ëŸ°! cannot get / ì´ ë–´ë‹¤
ì™œ ê·¸ëŸ´ê¹Œ? ê·¸ê±´ ë°”ë¡œ app.get("/", handleHome);ì—ì„œ handleHome ì˜†ì— ë‹¤ë¥¸ í•¨ìˆ˜ê°€ ì¡´ì¬í•˜ì§€
ì•Šê¸° ë•Œë¬¸ì— ì•„ì–˜ next í•¨ìˆ˜ ì‹¤í–‰ ìì²´ê°€ ì•ˆ ëœê²ƒì´ë‹¤
í  ì¼ë‹¨ ì´ê±´ ì°¨ì°¨ í•´ê²°í•´ë³´ê³  middleware ë¶€í„° ë§Œë“¤ì–´ë³´ì gossipMiddleware ë¼ëŠ” í•¨ìˆ˜ í•˜ë‚˜
ë§Œë“¤ì—ˆë‹¤ ê·¸ë¦¬ê³  ì–˜ëŠ” ì½˜ì†”ì°½ í…ìŠ¤íŠ¸ ì¶œë ¥ê³¼ í•¨ê»˜ next() í•¨ìˆ˜ê°€ ì‘ë™í•˜ê²Œ ì§°ë‹¤
ê·¸ë¦¬ê³  ì´ gossipMiddlewareë¥¼ app.get("/", gossipMiddleware, handleHome); ì´ë ‡ê²Œ
handleHome ì˜†ì— ë‘ë‹ˆê¹ ì¸ì œ next()ì˜ ì—­í• ì„ ì•Œ ìˆ˜ ìˆê²Œ ëë‹¤
ì¸ì œ userê°€ í™ˆí˜ì´ì§€ì— requestë³´ë‚´ë©´ ìš°ì„  gossipMiddleware ì‹¤í–‰ë˜ê³  nextë¡œ handleHomeì´
ì‹¤í–‰ëœë‹¤ ì—¬ê¸°ì„œ handleHomeì€ êµ³ì´ ë§í•˜ìë©´ finalwareì˜ ì—­í• ì„ í•œë‹¤. ì¦‰, ë§ˆì§€ë§‰ìœ¼ë¡œ
í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì¸ ê²ƒì´ë‹¤ gossipMiddlewareê°™ì€ ë¯¸ë“¤ì›¨ì–´ë„ ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• ì„ í•  ìˆ˜ ìˆë‹¤
ì»¨íŠ¸ë¡¤ëŸ¬ë‘ í•¨ìˆ˜ í˜•íƒœ ë˜‘ê°™ë‹¤ ì˜ˆë¥¼ ë“¤ì–´ gossipMiddleware ë‚´ì— return res.send("hi"); ë¥¼
next() ì „ì— ë„£ê²Œ ë˜ë©´ ì—¬íƒ€ ì»¨íŠ¸ë¡¤ëŸ¬ ì²˜ëŸ¼ ë¸Œë¼ìš°ì €ì— hië¥¼ í‘œì‹œí•  ê²ƒì´ë‹¤
ê·¸ì¹˜ë§Œ next ì „ì— returnì„ í•˜ê²Œ ë˜ë¯€ë¡œ nextëŠ” í˜¸ì¶œë˜ì§€ ì•Šê³  handleHomeë˜í•œ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤
ì¦‰ ë¯¸ë“¤ì›¨ì–´ê°€ ë¯¸ë“¤ì›¨ì–´ë¡œì„œì˜ ì—­í• ì„ í• ë ¤ë©´ next() í•¨ìˆ˜ê°€ ê·¸ ì•ˆì— ìˆì–´ì•¼ í•œë‹¤
ê·¸ë ‡ê¸° ë•Œë¬¸ì— ëª¨ë“  ë¯¸ë“¤ì›¨ì–´ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì´ì§€ë§Œ ê·¸ë ‡ë‹¤ê³  ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë¯¸ë“¤ì›¨ì–´ì¸ ê²ƒì€ ì•„ë‹Œ ê²ƒì´ë‹¤
ì •ë¦¬í•˜ìë©´ middlewareëŠ” responseë¥¼ í•˜ëŠ” í•¨ìˆ˜ê°€ ì•„ë‹ˆë¼ ì‘ì—…ì„ ë‹¤ìŒ í•¨ìˆ˜ì—ê²Œ ë„˜ê¸°ëŠ” í•¨ìˆ˜ì¸ ê²ƒì´ë‹¤
ê·¸ë ‡ë‹¤ë©´ ë¯¸ë“¤ì›¨ì–´ì— userì˜ req.url ì •ë³´ë¥¼ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ë³´ì

{3_6_Middleware part Two}
í›„ ì¸ì œ appì˜¤ë¸Œì íŠ¸ì˜ ë©”ì„œë“œë¥¼ í•˜ë‚˜ ë” ë°°ì›Œë³´ì ë°”ë¡œ app.useì´ë‹¤ useëŠ” global middleware
ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ì–´ëŠ urlì—ì„œë„ ì‘ë™í•˜ëŠ” ë²”ìš©ì ì¸ middleware ë§ì´ë‹¤
app.useë¥¼ ì“¸ë•ŒëŠ” ì´ê±¸ ì“°ëŠ” ìœ„ì¹˜ê°€ ì¤‘ìš”í•˜ë‹¤ ì–˜ëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ë§Œë“¤ë¯€ë¡œ ë¬´ì¡°ê±´ responseë¥¼ ë‹´ë‹¹í•˜ëŠ”
finalware ì „ì— app.use(middleware); ê°€ ì™€ì•¼ í•œë‹¤
ì¸ì œ ë¸Œë¼ìš°ì € ë“¤ì–´ê°€ë³´ì ì „ì´ë‘ ë˜‘ê°™ìŒì„ ì•Œ ìˆ˜ ìˆë‹¤. ê·¸ì¹˜ë§Œ ì¸ì œëŠ” ë²”ìš©ì ì¸ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì“°ê¸°ë•Œë¬¸ì—
ì–´ë–¤ í˜ì´ì§€ë¥¼ ë“¤ì–´ê°€ë“  ë¯¸ë“¤ì›¨ì–´ê°€ ì‘ë™í•œë‹¤. ì˜ˆë¥¼ë“¤ì–´ localhost: 4000/login ë“¤ì–´ê°€ë„
ì½˜ì†”ì°½ì— middleware running ì´ ëœ¨ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤
ëª…ì‹¬í• ê²ƒ! app.useëŠ” ê¸€ë¡œë²Œ ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰í•˜ëŠ” ë©”ì„œë“œë¡œì„œ ë¬´ì¡°ê±´ finalware ë³´ë‹¤ ì „ì—
ì™€ì•¼ì§€ ì •ìƒì ìœ¼ë¡œ ë¯¸ë“¤ì›¨ì–´ ì‘ë™í•œë‹¤!
req.methodë¥¼ ì“°ë©´ ì–´ë–¤ ë°©ì‹ì˜ requestê°€ ì™”ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤
gossipMiddlewareì˜ ì´ë¦„ì„ loggerë¡œ ë³€ê²½í•˜ê² ë‹¤ ê·¸ë¦¬ê³  prtectionMiddleware ì„ í•˜ë‚˜ ë” ë§Œë“¤ì—ˆë‹¤
protectionMiddlewareëŠ” ë§Œì•½ userê°€ /protectedì— ì ‘ì†í–ˆì„ë•Œ not allowedë¥¼
ì¶œë ¥í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ì´ë‹¤. ì½”ë“œë¥¼ ë³´ê³  í•´ì„í•´ë³´ì ë§Œì•½(if) urlì´ /protectedë¼ë©´ res.sendë¡œ 
not allowed ì°½ì— ì¶œë ¥í•˜ê³  ì•„ë‹ˆë©´ next(); ë¥¼ ì¨ì„œ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ë„˜ì–´ê°€ëŠ” ì½”ë“œì´ë‹¤
ì ì´ë ‡ê²Œ ì½”ë“œ ì§œê³  ë§Œì•½ app.get("/prtected",handleProtected); ë©”ì„œë“œê°€ ìˆë‹¤ê³  í•´ë³´ì
urlì°½ì— /protected requestí•˜ë©´ ìš°ì„  protectionMiddleware ì‘ë™í•˜ê³  url ê²€ì‚¬ë¥¼ ì¡°ê±´ë¬¸ìœ¼ë¡œ
ì§„í–‰í•œë‹¤ ì¡°ê±´ë¬¸ì— ê±¸ë ¸ìœ¼ë¯€ë¡œ not allowedë¥¼ í™”ë©´ìƒì— ì¶œë ¥í•œë‹¤. ì´ ìƒí™©ì—ì„œ protectionMiddleware
ëŠ” next() ê°€ ì‹¤í–‰ë˜ì§€ ì•Šê³  responseë¥¼ í–ˆìœ¼ë¯€ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ëœ ê²ƒì´ë‹¤
ì´ ìƒí™©ì—ì„  loggerëŠ” ë¯¸ë“¤ì›¨ì–´, protectionMiddleware ëŠ” íŒŒì´ë„ì›¨ì–´ë¡œ ì“°ì¸ ê²ƒì´ë‹¤
const logger = (req, res, next) => {
  console.log("middleware running");
  console.log(`${req.method} ${req.url}`);
  next();
};

const privateMiddleware = (req, res, next) => {
  const url = req.url;
  if (url === "/protected") {
    console.log("Can't access");
    return res.send("<h1>Not Allowed âŒ</h1>");
  }
  console.log("Allowed, you may continue");
  next();
};

const handleHome = (req, res) => {
  return res.send("<h1>I love Middleware</h1>");
};
const handleProtected = (req, res) => {
  return res.send("Welcome to the private lounge");
};
app.use(logger);
app.use(privateMiddleware);
app.get("/", handleHome);
app.get("/protected", handleProtected);


{3_11_ExternalMiddlewares}
ì•ìœ¼ë¡œ ë§¤ìš° ìœ ëª…í•œ ë¯¸ë“¤ì›¨ì–´ë“¤ì„ ì‚¬ìš©í•´ë³¼ ê²ƒì´ë‹¤ ë¯¸ë“¤ì›¨ì–´ëŠ” ì¤‘ìš”í•˜ë¯€ë¡œ ìˆ™ì§€í•˜ê³  ìˆì!!
ë¯¸ë“¤ì›¨ì–´ëŠ” ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ì„ í–ˆëŠ”ì§€, ì•ˆí–ˆëŠ”ì§€ë¥¼ í™•ì¸í• ë•Œ ë“±ì— ì‚¬ìš©ëœë‹¤
ìì£¼ ì“°ëŠ” ë¯¸ë“¤ì›¨ì–´ì—ëŠ” morganì´ ìˆë‹¤
npmì—ì„œ morganì„ ê²€ìƒ‰í•´ë³´ë©´ ì–˜ëŠ” nodeJSìš© request logger middleware ì´ë¼ê³  ì„¤ëª…ë¼ìˆë‹¤
npm i morgan ìœ¼ë¡œ ì„¤ì¹˜í•´ì£¼ì ì´ëŸ° ì™¸ë¶€ì—ì„œ ì„¤ì¹˜í•´ì„œì“°ëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ external middlewareë¼ê³  í•œë‹¤
npm ì‚¬ì´íŠ¸ì˜ ë§¤ë‰´ì–¼ëŒ€ë¡œ morganì„ ì“°ë©´ ë˜ëŠ”ë° ì¼ë‹¨ morgan í•¨ìˆ˜ë¥¼ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤
express import í–ˆë˜ê²ƒì²˜ëŸ¼ morgan ë„ import í•˜ì
import í• ë•ŒëŠ” êµ³ì´ í•¨ìˆ˜ì´ë¦„ì„ íŒ¨í‚¤ì§€ì™€ ë˜‘ê°™ì´ í•  í•„ìš” ì—†ë‹¤ ìš°ë¦¬ëŠ” í¸ì´ìƒ morganë¼ëŠ” ì´ë¦„ì„ 
ì“¸ ê²ƒì´ë‹¤ morgan() í•¨ìˆ˜ëŠ” morganì„ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤ í•¨ìˆ˜ê°’ìœ¼ë¡  devë“±ì´ ë“¤ì–´ê°„ë‹¤
loggerë¼ëŠ” ë³€ìˆ˜ì— ì´ ì„¤ì •ê°’ì„ ì €ì¥í•´ì£¼ì
ê·¸ë¦¬ê³  ë‹¤ë¥¸ ê¸€ë¡œë²Œ ë¯¸ë“¤ì›¨ì–´ì²˜ëŸ¼ app.use(logger); í˜•íƒœë¡œ ì½”ë“œ ì‘ì„±í•´ì£¼ë©´ ëœë‹¤
ì´ morganì€ ê¸°ì¡´ì— ìš°ë¦¬ê°€ ì§ì ‘ ë§Œë“¤ì–´ì¤¬ë˜ logger ë¯¸ë“¤ì›¨ì–´ë³´ë‹¤ ì¢€ ë” ì •êµí•˜ë‹¤
ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨í•´ë³´ë©´ ì½˜ì†”ì°½ì— GET, path, status code(ì—¬ê¸°ì„  304), ì§€ì—°ì‹œê°„ ë“±ì´
í‘œì‹œë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤ morganì˜ ì„¤ì •ìœ¼ë¡œëŠ” dev, combined, tiny ë“±ì´ ìˆë‹¤ ê°ê° ë‹¤ë¥¸
ì •ë³´ë¥¼ ì½˜ì†”ì°½ì— í‘œì‹œí•´ì¤„ ê²ƒì´ë‹¤ ì•„ morganì€ ë¯¸ë“¤ì›¨ì–´ì„ìœ¼ë¡œ ë‹¹ì—°íˆ ë§ˆì§€ë§‰ì— next()ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤
íŒ¨í‚¤ì§€ ì•ˆì˜ index.jsì— ë“¤ì–´ìˆë‹¤

import express from "express";
import morgan from "morgan";
const logger = morgan("dev");
const PORT = 4000;

const app = express();

const handleHome = (req, res) => {
  return res.send("<h1>I love Middleware</h1>");
};

app.use(logger);
app.get("/", handleHome);

const handleListening = () =>
  console.log(`Server listening on port http://localhost:${PORT} ğŸƒ`);

app.listen(PORT, handleListening);

{4_0_WhatAreRouters}
Routerì´ ë­˜ê¹Œ? routerëŠ” ìš°ë¦¬ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ URL ê´€ë¦¬ë¥¼ ì‰½ê²Œ í•´ì£¼ëŠ” ì˜¤ë¸Œì íŠ¸ì´ë‹¤
ì´ ì¼ë§Œì„ ìœ„í•œ ë¯¸ë‹ˆ ì• í”Œë¦¬ìºì´ì…˜ì¸ ê²ƒì´ë‹¤ ì´ê±´ ëª¨ë‘ ê°œë°œìë¥¼ ìœ„í•œ ê²ƒì´ë‹¤
ë¼ìš°í„°ë¥¼ ì´í•´í•˜ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ì§ì ‘ ë§Œë“¤ì–´ë³´ê³  í”„ë¡œì íŠ¸ì— ì´ë¥¼ ì ìš©í•´ë³´ëŠ” ê²ƒì´ë‹¤
ìš°ë¦¬ê°€ ìœ„íŠœë¸Œì—ì„œ ì“¸ ë°ì´í„°ëŠ” ë­ê°€ ìˆì„ê¹Œ
í¬ê²Œ 2ê°€ì§€ê°€ ìˆë‹¤
ì²«ì¨°ëŠ” ë¹„ë””ì˜¤ì´ë‹¤. ë¹„ë””ì˜¤ë¥¼ ì—…ë¡œë“œí•  ìˆ˜ ìˆê³  ì‹œì²­í•  ìˆ˜ ìˆìœ¼ë©° ì§€ìš¸ ìˆ˜ë„ ìˆë‹¤
ì´ê±¸ í•˜ëŠ” ì‚¬ëŒì´ ëˆ„êµ¬ì¸ê°€? ë°”ë¡œ ìœ ì €ì´ë‹¤
ì¦‰, ë‘ë²ˆì¨°ëŠ” ìœ ì €ì´ë‹¤ ìœ ì €ëŠ” ê³„ì •ì„ ë§Œë“¤ ìˆ˜ ìˆê³  ë¹„ë°€ë²„í˜¸ ì¬ì„¤ì •ì„ í•  ìˆ˜ ìˆìœ¼ë©°
ëŒ“ê¸€ë„ ë‹¬ ìˆ˜ ìˆë‹¤
ì´ ë‘ê°€ì§€, ë¹„ë””ì˜¤ì™€ ìœ ì €ê°€ ìš°ë¦¬ í”„ë¡œì íŠ¸ì˜ domain ì¸ê²ƒì´ë‹¤
ì´ì œ ì´ ë„ë©”ì¸ì„ URL ì°¨ì›ì—ì„œ ìƒê°í•´ë³¼ ê²ƒì´ë‹¤
README íŒŒì¼ì— ìš°ë¦¬ê°€ ë§Œë“¤ í”„ë¡œì íŠ¸ì— ëŒ€í•œ êµ¬ìƒì„ í•´ë³´ê² ë‹¤ ì—¬ê¸°ë‹¤ê°€ë„ í•´ë³´ê² ë‹¤
/ -> home
/join -> Join
/login -> Login
/search -> Search


/edit-user -> Edit User
/delete-user -> Delete User
/watch-videos -> Watch Video
/edit-videos -> Edit Video
/delete-videos -> Delete Video
í›„ ì´ë ‡ê²Œ ìš°ë¦¬ê°€ ë§Œë“¤ í˜ì´ì§€ë¥¼ urlë¡œ ì •ë¦¬í•´ë´¤ë‹¤ ì¸ì œ ë¼ìš°í„°ë¥¼ ë„ë©”ì¸ ë³„ë¡œ ë‚˜ëˆŒ ê²ƒì´ë‹¤
ìœ„ì²˜ëŸ¼ /{ì–´ì©Œêµ¬}-{ì €ì©Œêµ¬} ë¡œ í˜ì´ì§€ë¥¼ ë§Œë“œëŠ”ê±° ëŒ€ì‹ ì— /{ì–´ì©Œêµ¬}/{ì €ì©Œêµ¬} ì´ëŸ°ì‹ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤
/edit-user == /users/edit
/delete-user == /users/delete
/watch-video == /videos/watch
/edit-video == /videos/edit
               /videos/comments
               /videos/comments/delete
ì´ë ‡ê²Œ ë°”ê¾¸ë‹ˆê¹Œ ë­”ê°€ ë³´ì´ì§€ ì•ŠëŠ”ê°€? urlì— êµ¬ë¶„ì´ ìˆë‹¤ëŠ”ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤
ì¦‰, ë¼ìš°í„°ëŠ” ë„ˆí¬ê°€ ì‘ì—…ì¤‘ì¸ ì£¼ì œë¥¼ ê¸°ë°˜ìœ¼ë¡œ URLì„ ê·¸ë£¹í™”í•´ì¤€ë‹¤ ë…¸ë§ˆë“œì½”ë” ì‚¬ì´íŠ¸ì˜ url
ë„ ì´ëŸ°ì‹ìœ¼ë¡œ ë¼ìˆëŠ”ê±¸ ë³¼ ìˆ˜ ìˆë‹¤ ì´ë ‡ê²Œ í•˜ëŠ”ê²Œ í› ì–¼ì”¬ ê¹”ë”í•˜ê³  url ì •ë¦¬í•˜ê¸° ì¢‹ë‹¤
ìœ„ì—ì„œ ë§Œë“  / , /login , /join ë“±ì€ í™ˆí˜ì´ì§€ì—ì„œ ë°”ë¡œ ê°ˆ ìˆ˜ ìˆëŠ” í˜ì´ì§€ë“¤ì„
ë‹´ê³  ìˆëŠ” global routerê°€ ëœë‹¤ 
ìš°ë¦¬ê°€ ë§Œë“¤ ë¼ìš°í„°ë“¤ì„README íŒŒì¼ì— ì •ë¦¬í•´ë‘ê² ë‹¤

{4_1_MakingOurRouters}
ê·¼ë° ìƒê°í•´ë³´ë©´ ë¡œê·¸ì¸ì„ í•œë‹¤ ì³¤ì„ë•Œ ë¡œê·¸ì¸ì€ ìœ ì €ê°€ í•˜ì§€ ì•ŠëŠ”ê°€? ê·¸ë¦¬ê³  íšŒì›ê°€ì…ë„ ìœ ì €ê°€
í•œë‹¤. ê·¸ë ‡ë‹¤ë©´ /join, /login ë“±ì´ ì•„ë‹ˆë¼ /users/join, /users/login ë¡œ ì¨ì•¼ ë” ì§ê´€ì ì´ì§€ ì•Šì„ê¹Œ?
ì¸ì œ ì´ ê·œì¹™ì˜ ë¶ˆê·œì¹™í•œ ë¶€ë¶„ì„ ë§í•´ì¤„ ë–„ê°€ ëë‹¤
ë°©ê¸ˆì²˜ëŸ¼ ì €ë ‡ê²Œ ë­”ê°€ ë” ì§ê´€ì ìœ¼ë¡œ ë³´ì¼ê²ƒ ê°™ì€ urlì„ íƒ€ì¸(user)ì—ê²Œ ì¤¬ë‹¤ê³  í•´ë³´ì
ì´ê²Œ ì§ê´€ì ì¼ê¹Œ? mincoders.co/users/login ë³´ë‹¤ëŠ” ê·¸ëƒ¥ ê¹”ë”í•˜ê²Œ mincoders.co/login ì— ì ‘ì†
í•´ë³´ë¼ê³  í•˜ëŠ”ê²Œ ìƒëŒ€ë°© ì…ì¥ì—ì„œë„ ì§ê´€ì ì¼ ê²ƒì´ë‹¤ ê·¸ë˜ì„œ ê·¸ëƒ¥ ì´ë ‡ê²Œ ê¸€ë¡œë²Œ ë¼ìš°í„°ë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤
ì, ë¼ìš°í„°ëŠ” ì–´ë–»ê²Œ ë§Œë“œëŠ” ê±¸ê¹Œ?
ì¼ë‹¨ ìš°ë¦¬ëŠ” 3ê°œì˜ ë¼ìš°í„°ê°€ ìˆë‹¤ ê¸€ë¡œë²Œ ë¼ìš°í„°, users ë¼ìš°í„°, videos ë¼ìš°í„°.
ì–´ì¼€ ë§Œë“œëƒë©´ ê·¸ëƒ¥ sever.jsì—ì„œ const globalRouter = express.Router(); ì´ë ‡ê²Œ í•˜ë©´ ëœë‹¤
ê¸€ë¡œë²Œ ë¼ìš°í„° ì™„ì„±! ë‚˜ë¨¸ì§€ ë‘ ë¼ìš°í„°ë„ ë˜‘ê°™ì´ í•´ì„œ ë§Œë“¤ ìˆ˜ ìˆë‹¤
ì´ ë¼ìš°í„°ë¥¼ ì–´ì¼€ ì“¸ ìˆ˜ ìˆì„ê¹Œ?
ë¨¼ì € ê° ë¼ìš°í„°ì˜ root urlì„ ê°€ì ¸ì™€ì•¼ í•œë‹¤(ê¸€ë¡œë²Œì˜ ê²½ìš° /, ìœ ì €ì˜ ê²½ìš° /users, ë¹„ë””ì˜¤ëŠ” /videos)
app.use("/users", userRouter) ì´ë ‡ê²Œ ê°ê°ì˜ urlì„ ë¼ìš°í„°ë¡œ ì§€ì •í•´ì¤„ ìˆ˜ ìˆë‹¤
ì¦‰ /usersë¥¼ ë¼ìš°í„°ë¡œì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤¬ë‹¤ app.useê°€
ì ì¸ì œ appì€ ì¤€ë¹„ëë‹¤ ì¸ì œ ë³¸ê²©ì ìœ¼ë¡œ ì´ ë¼ìš°í„°ë“¤ì— í•¨ìˆ˜ë¥¼ ë„£ì–´ì¤˜ì•¼ í•œë‹¤
ìš°ì„  ê°ê°ì˜ ë¼ìš°í„°ì˜ ì²«ë²ˆì§¸ í˜ì´ì§€ë“¤ì„ ë§Œë“¤ì–´ë³´ì /ì˜ ê²½ìš° /, /usersì˜ ê²½ìš° /users/edit,
/videosì˜ ê²½ìš° /videos/watch ì´ë‹¤
ê·¸ë¦¬ê³  ì¸ì œ ê° url ë¦¬í€˜ìŠ¤íŠ¸ ì™”ì„ë•Œ ë°˜ì‘í•  ìˆ˜ ìˆê²Œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ê° ë¼ìš°í„°ë§ˆë‹¤ ë§Œë“œëŸ¬ì¤€ë‹¤
const handleHome = (req, res) => res.send("Home"); ì´ë ‡ê²Œ ë§ì´ë‹¤
ê·¸ë¦¬ê³  ì¸ì œ get ë©”ì„œë“œë¥¼ ì¨ì„œ request ë°›ì„ ê±´ë° ì´ë•Œ app.getì´ ì•„ë‹Œ router.get()ì„ ì¨ì•¼ëœë‹¤
ê·¸ë¦¬ê³  urlë„£ëŠ” ì¹¸ì—ëŠ” ë¼ìš°í„° ë’· ì£¼ì†Œë§Œ ë„£ì–´ì£¼ë©´ ëœë‹¤ ì´ë ‡ê²Œ ë¼ìš°í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤
ë¸Œë¼ìš°ì € ë“¤ì–´ê°€ì„œ ê°ê°ì˜ ë¼ìš°í„°ì˜ ì²«í˜ì´ì§€ë¥¼ ì£¼ì†Œì°½ì— ì…ë ¥í•˜ë©´ í…ìŠ¤íŠ¸ ì¶œë ¥ë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤
ì´ë ‡ê²Œ ë¼ìš°í„°ë¥¼ ì¨ì•¼ ì½”ë“œ ì§¤ë•Œ ì£¼ì†Œë¥¼ ê¸¸ê²Œ ë‚˜ì—´í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²ƒì´ë‹¤ ì´ë ‡ê²Œ ë¼ìš°í„°ë¥¼ ì“°ëŠ”ë²•
ë°°ì› ë‹¤ ê·¼ë° ì´ì½”ë“œëŠ” ì¡°ê¸ˆ ë”ëŸ½ë‹¤ ë‹¤ìŒì¥ì—ì„œëŠ” cleaní•˜ê²Œ ì´ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë²• ë°°ìš¸ ê²ƒì´ë‹¤
import express from "express";
import morgan from "morgan";

const PORT = 4000;

const app = express();
const logger = morgan("dev");
app.use(logger);

const globalRouter = express.Router();
const handleHome = (req, res) => res.send("Home");
globalRouter.get("/", handleHome);

const userRouter = express.Router();
const handleEditUser = (req, res) => res.send("Edit User");
userRouter.get("/edit", handleEditUser);

const videoRouter = express.Router();
const handleWatchVideo = (req, res) => res.send("Watch Video");
videoRouter.get("/watch", handleWatchVideo);

app.use("/videos", videoRouter);
app.use("/users", userRouter);
app.use("/", globalRouter);

const handleListening = () =>
  console.log(`Server listening on port http://localhost:${PORT} ğŸƒ`);

app.listen(PORT, handleListening);
