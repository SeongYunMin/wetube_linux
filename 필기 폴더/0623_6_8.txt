{6_8_ConnetctingToMongo}
Ïù¥Î≤à Í∞ïÏùòÏóêÏÑúÎäî mongooseÏóê ÎåÄÌï¥ ÏïåÏïÑÎ≥º Í≤ÉÏù¥Îã§ mongooseÎäî node.jsÏôÄ mongoDBÎ•º Ïù¥Ïñ¥Ï£ºÎäî Îã§Î¶¨
Ïó≠Ìï†ÏùÑ Ìï¥Ï£ºÎäî Ïï†Ïù¥Îã§ Ïù¥ Ìå®ÌÇ§ÏßÄÎäî Îß§Ïö∞ Ïú†Î™ÖÌïòÍ≥† Ïú†Ïö©ÌïòÎã§ Í∑∏ Ïù¥Ïú†Îäî Ïö∞Î¶∞ JSÏΩîÎìúÎ•º Ïç®ÏÑú mongoDBÎ•º
ÏÇ¨Ïö©ÌïòÍ∏∏ ÏõêÌïòÍ∏∞ ÎïåÎ¨∏Ïù¥Îã§ wslÏóêÏÑú sudo service mongod start Ïù¥ Î™ÖÎ†πÏùÄ ÏóêÎü¨Í∞Ä ÎπàÎ≤àÌûà Î∞úÏÉùÌïúÎã§
Í∑∏ÎÉ• Ï∞Ω 2Í∞ú Ïó¥Í≥† mongodÎûë mongo Îî∞Î°ú Ïã§ÌñâÏãúÏºúÏ£ºÏûê Ïù¥ mongo ÏïàÏóêÏÑú Î™ÖÎ†πÏñ¥ ÏûÖÎ†•ÌïòÎ©¥ Îã§ÏñëÌïú Ï†ïÎ≥¥
Î≥º Ïàò ÏûàÎã§ help Ï≥êÏÑú Î™ÖÎ†πÏñ¥ Î≠êÏûàÎäîÏßÄ Î≥º Ïàò ÏûàÎã§ show dbs ÏûÖÎ†•Ìï¥Î≥¥Î©¥ local Ïù¥Îûë admin ÎÇòÏò§Îäî Í±∏
Î≥º Ïàò ÏûàÎã§ mongoDB shellÏóê ÎåÄÌï¥ÏÑúÎäî Ï¢Ä ÎÇòÏ§ëÏóê Î∞∞Ïö∏ Í≤ÉÏù¥Îã§
Ïûê Ïù∏Ï†ú npm i mongoose Î°ú Î™ΩÍµ¨Ïä§ Îã§Ïö¥Î∞õÏïÑÏ£ºÍ≥† Ïö∞Î¶∞ Îã§Ïö¥Î∞õÎäî ÎèôÏïà db.js ÎùºÎäî ÌååÏùºÏùÑ 
server.js Î∞îÎ°ú ÏòÜÏóê ÎßåÎì§Ïñ¥Ï§Ñ Í≤ÉÏù¥Îã§ Ïûê ÏùºÎã® mongo ÏóêÏÑú ÎÇ¥ databaseÍ∞Ä Ïã§ÌñâÎêòÍ≥† ÏûàÎäî urlÏùÑ
Ï∞æÏïÑÏïº ÌïòÎäîÎç∞ ÏÉÅÎã®Ïóê mongodb://127.0.0.1:27017 Ïù¥Î†áÍ≤å ÌëúÏãúÎèºÏûàÎã§ Ïù¥ mongo Î™ÖÎ†πÏñ¥Î•º consoleÏóêÏÑú
Ïã§ÌñâÏãúÏºúÏÑú Ïù¥ urlÏùÑ Î∞õÏïÑÏïº ÌïúÎã§ db.jsÏóê ÏïÑÎûòÏ≤òÎüº ÏΩîÎìú ÏûëÏÑ±ÌïòÎ©¥ ÎêúÎã§
import mongoose from "mongoose";
mongoose.connect("mongodb://127.0.0.1:27017/wetube"); 

ÌïúÍ∞ÄÏßÄ ÏïåÏïÑÏïºÌï† Ï†êÏùÄ mongodb://127.0.0.1:27017 Ïù¥ db url Îí§Ïóê Ïö∞Î¶¨Í∞Ä ÎßåÎì§ dbÏùò Ïù¥Î¶ÑÏùÑ
url ÌòïÏãùÏúºÎ°ú ÎÑ£Ïñ¥Ï§òÏïº ÌïúÎã§Îäî Í≤ÉÏù¥Îã§ Ïó¨Í∏∞ÏÑ† /wetubeÎ°ú ÌñàÎã§
import mongoose from "mongoose";
mongoose.connect("mongodb://127.0.0.1:27017/wetube");
Ïù¥Î†áÍ≤å ÌïòÎ©¥ wetube ÎùºÎäî mongodb databaseÎ•º Ïì∏ Ïàò ÏûàÍ≤å ÎêúÎã§. wetube database ÏÉùÏÑ±ÏùÄ Ï∂îÌõÑÏóê
Î∞∞Ïö∞Í≤†Îã§ Ïù∏Ï†ú Ïù¥ db.js ÌååÏùºÏùÑ serverÏóê Ïó∞Í≤∞Ìï¥ÏïºÌïúÎã§
Îî∞ÎùºÏÑú db.jsÎ•º import Ìï¥Ï§Ñ Í±¥Îç∞ server.jsÏóê import "./db"; Ïù¥Î†áÍ≤å Ìï¥Ï£ºÎ©¥ ÌååÏùº Ï†ÑÏ≤¥ import 
Í∞ÄÎä•ÌïòÎã§ ÌååÏùº Ï†ÑÏ≤¥ Í∞ÄÏ†∏Ïò¨ÎñÑÎäî db.js ÌååÏùºÎÇ¥ÏóêÏÑú export Ïì∞ÏßÄ ÏïäÎäîÎã§. Ïûê Ïù¥Î†áÍ≤å db.jsÎ•º 
sever.jsÏóê Ïó∞Í≤∞Ìïú ÌõÑ Ïù∏Ï†ú npm run devÎ•º Ìï¥Î≥¥Ïûê
warningÏù¥ Îú®Îäî Í≤ÉÏùÑ Î≥º Ïàò ÏûàÎã§. Í∑ºÎç∞ warningÏù¥ 2Í∞ú Îú¨Îã§ ÌòÑÏû¨ Ïì∞Îäî url ÌååÏÑúÍ∞Ä Í≥ß ÏÇ¨ÎùºÏßà Í≤ÉÏù¥ÎùºÎäî
Í≤ΩÍ≥† ÌïòÎÇòÏôÄ Îòê Ïñ¥Îñ§ Í≤ΩÍ≥† ÌïòÎÇò Îú®ÎäîÎç∞ Ïù¥Îäî warning Ïûò ÏùΩÏñ¥Î≥¥Î©¥ Ïñ¥ÏºÄ Í≥†Ï≥êÏïºÌï† ÏßÄ Ïïå Ïàò ÏûàÎã§
mongoose.connectÏùò ÎëêÎ≤àÏ®∞ Ïù∏ÏûêÎ°ú { useNewUrlParser: true, useUnifiedTopology: true, } ÎÑ£Ïñ¥
Ï£ºÎ©¥ Í≤ΩÍ≥† Î¨∏Íµ¨ ÏóÜÏï® Ïàò ÏûàÎã§ Í≤ΩÍ≥†Í∞Ä Îú®Î©¥ Í≤ΩÍ≥† ÏïàÏóê Ìï¥Í≤∞Ï±ÖÏù¥ ÏûàÎã§
Ïù∏Ï†ú ÏÑ±Í≥µÏ†ÅÏúºÎ°ú  wetube database Ïó∞Í≤∞ÏùÑ ÏôÑÎ£åÌñàÎã§ Í∑ºÎç∞ ÌÑ∞ÎØ∏ÎÑêÏóê mongo ÌÇ§Í≥† show dbs ÏûÖÎ†•Ìï¥Î≥¥Î©¥ 
ÏïÑÏßÅ wetube ÎùºÎäî databaseÎäî Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäîÎã§ Ïù¥Í±¥ Ï∂îÌõÑÏóê Îçî Î∞∞ÏõåÎ≥¥Ïûê
Ïûê Ïù∏Ï†ú dbÎ•º ÌÇ¨Îïå ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ïó∞Í≤∞ÎêêÎäîÏßÄ ÏïÑÎãò ÏóêÎü¨Í∞Ä ÎÇ¨ÎäîÏßÄ ÏΩòÏÜî Ï∞ΩÏóê ÎùÑÏö∞Îäî ÏΩîÎìúÎ•º Ï∂îÍ∞ÄÏ†ÅÏúºÎ°ú
ÏßúÏ£ºÏûê
const db = mongoose.connection;
db.on("error", (error) => console.log("DB error".error));
Ïù¥Î†áÍ≤å ÏßúÏ£ºÎ©¥ dbÎ•º on ÌïòÎäî Ïù¥Î≤§Ìä∏ Î∞úÏÉùÏãú ÏóêÎü¨Ïóê ÎåÄÏùëÌï† ÏàòÏûàÍ≤å ÎêúÎã§
dbÏóêÏÑú Î∞úÏÉùÌï† Ïàò ÏûàÎäî Îã§Î•∏ Ïù¥Î≤§Ìä∏Îäî databaseÎ°úÏùò connectionÏùÑ Ïó¨Îäî Ïù¥Î≤§Ìä∏Ïùº Í≤ÉÏù¥Îã§
connectionÏù¥ Ïó¥Î¶∞Îã§Îäî Í≤ÉÏùÄ Ïö∞Î¶¨Í∞Ä databaseÏóê Ïó∞Í≤∞ÎêúÎã§Îäî ÎúªÏù¥Îã§ Ïù¥ÎñÑ Ïì∏
Î©îÏÑúÎìúÎäî onceÏù¥Îã§ ÏúÑÏóêÏÑú Ïì¥ onÍ≥º onceÏùò Ï∞®Ïù¥Îäî onÏùÄ Ïó¨Îü¨Î≤à Í≥ÑÏÜç Î∞úÏÉùÏãúÌÇ¨ Ïàò ÏûàÎã§
(ex: ÌÅ¥Î¶≠) Î∞òÎ©¥ onceÎäî Ïò§Î°úÏßÄ ÌïúÎ≤àÎßå Î∞úÏÉùÌïúÎã§Îäî ÎúªÏù¥Îã§ Ï¶â If once connection has been opened
Ìï†ÎñÑ, Ï¶â openÏù¥ÎùºÎäî Ïù¥Î≤§Ìä∏ Î∞úÏÉùÏãú handleOpenÏúºÎ°ú ÎåÄÏùëÌï† Ïàò ÏûàÎäî ÏΩîÎìúÎ•º ÎßåÎì§Ïñ¥Î≥¥Ïûê
Ïó¨Í∏∞ÏÑú error Ïù¥Î≤§Ìä∏ Îã§Î£∞ÎïåÎäî on Ïì∞Í≥† open Ïù¥Î≤§Ìä∏Î•º Îã§Î£∞ ÎïåÎäî once Ïì¥ Ïù¥Ïú†Îäî error
Îäî Ïñ∏Ï†úÎì†ÏßÄ Î∞òÎ≥µÌï¥ÏÑú ÎÇ† Ïàò ÏûàÏßÄÎßå open Ïù¥Î≤§Ìä∏Îäî ÌîÑÎ°úÍ∑∏Îû® Ïã§ÌñâÏãú Îî± ÌïúÎ≤àÎßå Î∞úÏÉùÌïòÍ∏∞ ÎïåÎ¨∏Ïù¥Îã§
Ïûê Î≥µÏäµÌï¥Î≥¥ÏûêÎ©¥ mongodÎ•º ÌÇ§Î©¥ÏÑú database ÏÑúÎ≤ÑÍ∞Ä Ïó∞Í≤∞Ïù¥ ÎêêÍ≥† Ïö∞Î¶∞ Ïö∞Î¶¨Ïùò ÏÑúÎ≤ÑÏôÄ 
database ÏÑúÎ≤ÑÎ•º mongooseÎ•º ÌÜµÌï¥ Ïó∞Í≤∞ÌñàÎã§ Í∑∏Î¶¨Í≥† mongoose.connectionÏóêÏÑú Î∞úÏÉùÌïòÎäî Ïù¥Î≤§Ìä∏Î•º
catchÌï¥ÏÑú Í∑∏Ïóê ÎåÄÏùëÌï† Ïàò ÏûàÍ≤åÎÅî ÌñàÎã§ ÏïÑ ÎßûÎã§ server.jsÏóê db.js ÏûÑÌè¨Ìä∏ Ìï† ÎïåÎäî ÌååÏùº ÏûêÏ≤¥Î•º
import Ìï¥ÏïºÌïúÎã§ Ïù¥Î†áÍ≤å ÌïòÎ©¥ JSÎäî Ïù¥ db ÌååÏùº importÌï®Í≥º ÎèôÏãúÏóê Ïù¥ ÌååÏùºÏùÑ Ïã§ÌñâÏãúÌÇ®Îã§
Í∑ºÎç∞ import "./db"; Î•º sever.js Í∞ÄÏû• ÏúóÏ™ΩÏóê ÎíÄÎäîÎç∞ Ïôú 
 Server listening on port http://localhost:5000 üéÉ Ïù¥Í≤å Î®ºÏ†Ä Ï∂úÎ†•ÎêòÍ≥† Í∑∏ ÌõÑÏóê 
 Connected to DB Ï∂úÎ†•Îê†Íπå? Í∑∏ Ïù¥Ïú†Îäî DB serverÏôÄ connectÌïòÎäîÎç∞ ÏãúÍ∞ÑÏù¥ Ï¢Ä Í±∏Î¶¨Í∏∞ ÎñÑÎ¨∏Ïù¥Îã§
{db.js}
import mongoose from "mongoose";
mongoose.connect("mongodb://127.0.0.1:27017/wetube", {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});

const db = mongoose.connection;

const handleOpen = () => console.log("‚úÖ Connected to DB");
const handleError = () => console.log("‚ùó DB error".error);
db.on("error", handleError);
db.once("open", handleOpen);

{server.js Ï§ë import Î∂ÄÎ∂Ñ}
import "./db";
